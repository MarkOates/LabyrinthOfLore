properties:
  - name: source_bitmap
    type: ALLEGRO_BITMAP*
    init_with: nullptr
    constructor_arg: true
functions:
  - name: get_index_column_x
    type: int
    body: |
      return al_get_bitmap_width(source_bitmap) - 1;
  - name: pick_color
    type: ALLEGRO_COLOR
    parameters:
      - name: x
        type: int
        default_argument: 0
      - name: y
        type: int
        default_argument: 0
    body: |
      if (!source_bitmap) throw std::runtime_error("cannot pick_color with nullptr source_bitmap.");
      int w = al_get_bitmap_width(source_bitmap);
      if (w <= 1) throw std::runtime_error("cannot pick_color with source_bitmap less than 2 columns width");
      int h = al_get_bitmap_height(source_bitmap);
      if (y >= h) throw std::runtime_error("cannot pick_color at a coordinate beyond the height of the source_bitmap.");
      return al_get_pixel(source_bitmap, x, y);
  - name: pick_index_null_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 0);
  - name: pick_index_top_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 1);
  - name: pick_index_ground_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 2);
  - name: pick_index_gp_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 5);
  - name: pick_index_gpp_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 6);
  - name: pick_index_gppp_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 7);
  - name: pick_index_g1_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 8);
  - name: pick_index_gm_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 9);
  - name: pick_index_gmm_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 10);
  - name: pick_index_gmmm_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 11);
  - name: pick_index_gm1_color
    type: ALLEGRO_COLOR
    body: return pick_color(get_index_column_x(), 12);
  - name: validate
    type: bool
    body: |
      return true;
  - name: load
    type: LabyrinthOfLore::WorldMap::TileMap
    body: |
      if (!source_bitmap) throw std::runtime_error("could WorldBitmap::BitmapTileMapLoader.load with a nullptr source_bitmap");
      return {};
dependencies:
  - symbol: ALLEGRO_BITMAP*
    headers: [ allegro5/allegro.h ]
  - symbol: ALLEGRO_COLOR
    headers: [ allegro5/allegro_color.h ]
  - symbol: LabyrinthOfLore::WorldMap::TileMap
    headers: [ LabyrinthOfLore/WorldMap/TileMap.hpp ]
